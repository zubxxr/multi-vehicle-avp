from shapely.geometry import Point, Polygon

DROP_OFF_ZONE_POLYGON = [
    (-94.9, -58.27),
    (-96.8, -50.6),
    (-113.4, -54.8),
    (-111.9, -62.8)
]

drop_zone_polygon = Polygon(DROP_OFF_ZONE_POLYGON)

def is_in_drop_off_zone(x, y):
    return drop_zone_polygon.contains(Point(x, y))

parking_spot_goals = {
    1: {'x': -84.05, 'y': -46.03, 'z': 0.0, 'oz': 0.8106, 'ow': 0.5856},
    2: {'x': -80.79, 'y': -44.78, 'z': 0.0, 'oz': 0.8084, 'ow': 0.5886},
    3: {'x': -77.42, 'y': -44.0, 'z': 0.0, 'oz': 0.8042, 'ow': 0.5944},
    4: {'x': -74.18, 'y': -42.91, 'z': 0.0, 'oz': 0.8037, 'ow': 0.595},
    5: {'x': -70.73, 'y': -42.01, 'z': 0.0, 'oz': 0.8084, 'ow': 0.5886},
    6: {'x': -67.39, 'y': -40.89, 'z': 0.0, 'oz': 0.807, 'ow': 0.5905},
    7: {'x': -64.22, 'y': -39.91, 'z': 0.0, 'oz': 0.8029, 'ow': 0.5962},
    8: {'x': -61.02, 'y': -39.02, 'z': 0.0, 'oz': 0.8058, 'ow': 0.5922},
    9: {'x': -57.6, 'y': -38.03, 'z': 0.0, 'oz': 0.8042, 'ow': 0.5944},
    10: {'x': -54.25, 'y': -37.16, 'z': 0.0, 'oz': 0.8017, 'ow': 0.5977},
    11: {'x': -50.96, 'y': -36.05, 'z': 0.0, 'oz': 0.8064, 'ow': 0.5914},
    12: {'x': -53.53, 'y': -28.45, 'z': 0.0, 'oz': -0.5986, 'ow': 0.801},
    13: {'x': -56.57, 'y': -29.46, 'z': 0.0, 'oz': -0.6074, 'ow': 0.7944},
    14: {'x': -59.87, 'y': -30.47, 'z': 0.0, 'oz': -0.5838, 'ow': 0.8119},
    15: {'x': -63.43, 'y': -31.28, 'z': 0.0, 'oz': -0.6079, 'ow': 0.794},
    16: {'x': -66.5, 'y': -32.43, 'z': 0.0, 'oz': -0.599, 'ow': 0.8007},
    17: {'x': -69.77, 'y': -33.03, 'z': 0.0, 'oz': -0.6083, 'ow': 0.7937},
    18: {'x': -73.23, 'y': -33.95, 'z': 0.0, 'oz': -0.6015, 'ow': 0.7989},
    19: {'x': -76.55, 'y': -35.16, 'z': 0.0, 'oz': -0.6092, 'ow': 0.793},
    20: {'x': -79.67, 'y': -35.86, 'z': 0.0, 'oz': -0.609, 'ow': 0.7932},
    21: {'x': -83.23, 'y': -36.86, 'z': 0.0, 'oz': -0.6009, 'ow': 0.7993},
    22: {'x': -86.37, 'y': -38.03, 'z': 0.0, 'oz': -0.6005, 'ow': 0.7996},
}

def generate_command(x, y, z, oz, ow):
    return f"""ros2 topic pub /planning/mission_planning/goal geometry_msgs/msg/PoseStamped '{{header: {{frame_id: "map"}}, pose: {{position: {{x: {x}, y: {y}, z: {z}}}, orientation: {{x: 0.0, y: 0.0, z: {oz}, w: {ow}}}}}}}' --once"""

parking_spot_locations = {
    spot_id: generate_command(**pose_dict)
    for spot_id, pose_dict in parking_spot_goals.items()
}
